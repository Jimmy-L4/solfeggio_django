(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36eb5daf","chunk-be8cfcf2"],{"0fea":function(t,e,n){"use strict";n.d(e,"j",(function(){return o})),n.d(e,"k",(function(){return a})),n.d(e,"o",(function(){return s})),n.d(e,"n",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"h",(function(){return l})),n.d(e,"p",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return p})),n.d(e,"g",(function(){return h})),n.d(e,"m",(function(){return b})),n.d(e,"l",(function(){return g})),n.d(e,"c",(function(){return v})),n.d(e,"f",(function(){return j})),n.d(e,"i",(function(){return L})),n.d(e,"r",(function(){return y})),n.d(e,"v",(function(){return O})),n.d(e,"s",(function(){return _})),n.d(e,"q",(function(){return w})),n.d(e,"t",(function(){return k})),n.d(e,"u",(function(){return x}));var r=n("b775"),i={user:"/user",role:"/role",service:"/service",permission:"/permission",permissionNoPager:"/permission/no-pager",orgTree:"/org/tree",studentList:"/manage/studentList",commitList:"/manage/commitList",noticeList:"/notice/",ChoiceQuesList:"/question/choice/",DictationQuesList:"/question/dictation/",SightsingingQuesList:"/question/sightsinging/",SightsingingList:"/question/sightsinging_list/",ChoiceList:"/question/choice_list/",DictationList:"/question/dictation_list/",QuesGroupList:"/homework/quse_group/",ChoiceRecord:"/homework/choice/",SightsingingRecord:"/homework/sightsinging/",DictationRecord:"/homework/dictation/",UploadAudio:"/router/audio/",UploadJson:"/router/json/",UploadPNG:"/router/png/",studentInfo:"/user/student_info/"};function o(t){return Object(r["b"])({url:i.role,method:"get",params:t})}function a(t){return Object(r["b"])({url:i.service,method:"get",params:t})}function s(t){return Object(r["b"])({url:i.studentList,method:"get",params:t})}function c(t){return Object(r["b"])({url:i.studentInfo,method:"get",params:t})}function u(t){return Object(r["b"])({url:i.commitList,method:"get",params:t})}function l(t){return Object(r["b"])({url:i.noticeList,method:"get",params:t})}function d(t){return Object(r["b"])({url:i.noticeList,method:"put",data:t})}function f(t){return Object(r["b"])({url:i.noticeList,method:"post",data:t})}function m(t){return Object(r["b"])({url:i.noticeList,method:"delete",data:t})}function p(t){return Object(r["b"])({url:i.ChoiceQuesList,method:"get",params:t})}function h(t){return Object(r["b"])({url:i.DictationQuesList,method:"get",params:t})}function b(t){return Object(r["b"])({url:i.SightsingingQuesList,method:"get",params:t})}function g(t){return Object(r["b"])({url:i.SightsingingList,method:"get",params:t})}function v(t){return Object(r["b"])({url:i.ChoiceList,method:"get",params:t})}function j(t){return Object(r["b"])({url:i.DictationList,method:"get",params:t})}function L(t){return Object(r["b"])({url:i.QuesGroupList,method:"get",params:t})}function y(t){return Object(r["b"])({url:i.ChoiceRecord,method:"post",data:t})}function O(t){return Object(r["b"])({url:i.SightsingingRecord,method:"post",data:t})}function _(t){return Object(r["b"])({url:i.DictationRecord,method:"post",data:t})}function w(t){return Object(r["b"])({url:i.UploadAudio,method:"post",data:t})}function k(t){return Object(r["b"])({url:i.UploadJson,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function x(t){return Object(r["b"])({url:i.UploadPNG,method:"post",data:t})}},"31d0":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-header-wrapper",[n("a-card",{staticStyle:{"margin-top":"24px"},attrs:{bordered:!1,title:"通知列表"}},[n("div",{attrs:{slot:"extra"},slot:"extra"},[n("a-radio-group",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[n("a-radio-button",{attrs:{value:"2"}},[t._v("全部")]),n("a-radio-button",{attrs:{value:"1"}},[t._v("展示中")]),n("a-radio-button",{attrs:{value:"0"}},[t._v("已下架")])],1)],1),n("div",{staticClass:"operate"},[n("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus"},on:{click:t.handleAdd}},[t._v("添加")])],1),n("a-list",{ref:"table",attrs:{size:"large",loading:t.iconLoading}},t._l(t.noticeFilter,(function(e,r){return n("a-list-item",{key:r},[n("a-list-item-meta",{attrs:{description:e.project.content}},[n("a-avatar",{attrs:{slot:"avatar",size:"large",shape:"square",src:e.user.avatar},slot:"avatar"}),n("a",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.project.title))])],1),n("div",{attrs:{slot:"actions"},slot:"actions"},[n("a-button",{attrs:{type:"link"},on:{click:function(n){return t.post(e.project,e.id)}}},[t._v(t._s(e.project.type?"下架":"发布"))])],1),n("div",{attrs:{slot:"actions"},slot:"actions"},[n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a-popconfirm",{attrs:{title:"是否要删除此通知？"},on:{confirm:function(n){return t.remove(e.project,e.id)}}},[n("a",[t._v("删除")])])],1),n("a-menu-item",[n("a",{on:{click:function(n){return t.handleEdit(e.project,e.id)}}},[t._v("编辑")])])],1),n("a",[t._v("更多"),n("a-icon",{attrs:{type:"down"}})],1)],1)],1),n("div",{staticClass:"list-content"},[n("div",{staticClass:"list-content-item"},[n("span",[t._v("面向班级")]),n("p",[t._v(t._s(e.project.class))])]),n("div",{staticClass:"list-content-item"},[n("span",[t._v("通知时间")]),n("p",[t._v(t._s(e.startAt.replace("T"," ").substring(0,19)))])]),n("div",{staticClass:"list-content-item"},[n("a-badge",{attrs:{status:t._f("statusTypeFilter")(e.project.type),text:t._f("statusFilter")(e.project.type)}})],1)])],1)})),1),n("create-form",{ref:"createModal",attrs:{visible:t.visible,loading:t.confirmLoading,model:t.mdl},on:{cancel:t.handleCancel,ok:t.handleOk}})],1)],1)},i=[],o=n("5530"),a=(n("b0c0"),n("4de4"),n("d3b7"),n("0fea")),s=n("56cd"),c=n("febf"),u={0:{status:"default",text:"已下架"},1:{status:"processing",text:"展示中"}},l={name:"BulletinBoard",components:{CreateForm:c["default"]},data:function(){return{noticeList:[],status:"2",iconLoading:!1,visible:!1,confirmLoading:!1,mdl:null,userInfo:this.$store.getters.userInfo}},mounted:function(){this.getNotices()},methods:{handleAdd:function(){this.mdl=null,this.visible=!0},handleEdit:function(t,e){this.visible=!0,this.mdl=Object(o["a"])(Object(o["a"])({},t),{},{id:e})},handleOk:function(){var t=this,e=this.$refs.createModal.form;this.confirmLoading=!0,e.validateFields((function(n,r){if(n)t.confirmLoading=!1;else if(r.id>0){var i={id:r.id,type:1,title:r.title,content:r.content,classes:r.class};Object(a["p"])(i).then((function(n){t.visible=!1,t.confirmLoading=!1,e.resetFields(),t.getNotices(),s["a"].success({message:"更新通知成功！",description:""})})).catch((function(e){s["a"].error({message:"更新通知失败！",description:e}),t.confirmLoading=!1}))}else{var o={type:1,title:r.title,content:r.content,classes:r.class,nickname:t.userInfo.name,avatar:t.userInfo.avatar,author:t.userInfo.user};Object(a["a"])(o).then((function(n){t.visible=!1,t.confirmLoading=!1,e.resetFields(),t.getNotices(),s["a"].success({message:"添加通知成功！",description:""})})).catch((function(e){s["a"].error({message:"添加通知失败！",description:e}),t.confirmLoading=!1}))}}))},handleCancel:function(){this.visible=!1;var t=this.$refs.createModal.form;t.resetFields()},post:function(t,e){var n=this;this.iconLoading=!0;var r={id:e,type:t.type?0:1,title:t.title,content:t.content,classes:t.class};Object(a["p"])(r).then((function(e){n.getNotices(),s["a"].success({message:t.type?"下架通知成功！":"发布通知成功！",description:""})})).catch((function(e){s["a"].error({message:t.type?"下架通知失败！":"发布通知失败！",description:e}),n.iconLoading=!1}))},remove:function(t,e){var n=this;this.confirmLoading=!1;var r={id:e,type:-1,title:t.title,content:t.content,classes:t.class};Object(a["b"])(r).then((function(t){n.getNotices(),s["a"].success({message:"删除通知成功！",description:""})})).catch((function(t){s["a"].error({message:"删除通知失败！",description:t}),n.iconLoading=!1}))},getNotices:function(){var t=this;this.iconLoading=!0;var e={display:"false"};Object(a["h"])(e).then((function(e){t.noticeList=e,t.iconLoading=!1}))}},computed:{noticeFilter:function(){var t=this;return"2"==this.status?this.noticeList:this.noticeList.filter((function(e){return e.project.type==t.status}))}},filters:{statusFilter:function(t){return u[t].text},statusTypeFilter:function(t){return u[t].status}}},d=l,f=(n("e543"),n("2877")),m=Object(f["a"])(d,r,i,!1,null,"1703f029",null);e["default"]=m.exports},"88bc":function(t,e,n){(function(e){var n=1/0,r=9007199254740991,i="[object Arguments]",o="[object Function]",a="[object GeneratorFunction]",s="[object Symbol]",c="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")();function d(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function f(t,e){var n=-1,r=t?t.length:0,i=Array(r);while(++n<r)i[n]=e(t[n],n,t);return i}function m(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}var p=Object.prototype,h=p.hasOwnProperty,b=p.toString,g=l.Symbol,v=p.propertyIsEnumerable,j=g?g.isConcatSpreadable:void 0,L=Math.max;function y(t,e,n,r,i){var o=-1,a=t.length;n||(n=k),i||(i=[]);while(++o<a){var s=t[o];e>0&&n(s)?e>1?y(s,e-1,n,r,i):m(i,s):r||(i[i.length]=s)}return i}function O(t,e){return t=Object(t),_(t,e,(function(e,n){return n in t}))}function _(t,e,n){var r=-1,i=e.length,o={};while(++r<i){var a=e[r],s=t[a];n(s,a)&&(o[a]=s)}return o}function w(t,e){return e=L(void 0===e?t.length-1:e,0),function(){var n=arguments,r=-1,i=L(n.length-e,0),o=Array(i);while(++r<i)o[r]=n[e+r];r=-1;var a=Array(e+1);while(++r<e)a[r]=n[r];return a[e]=o,d(t,this,a)}}function k(t){return F(t)||C(t)||!!(j&&t&&t[j])}function x(t){if("string"==typeof t||D(t))return t;var e=t+"";return"0"==e&&1/t==-n?"-0":e}function C(t){return N(t)&&h.call(t,"callee")&&(!v.call(t,"callee")||b.call(t)==i)}var F=Array.isArray;function q(t){return null!=t&&A(t.length)&&!S(t)}function N(t){return $(t)&&q(t)}function S(t){var e=I(t)?b.call(t):"";return e==o||e==a}function A(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}function I(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function $(t){return!!t&&"object"==typeof t}function D(t){return"symbol"==typeof t||$(t)&&b.call(t)==s}var Q=w((function(t,e){return null==t?{}:O(t,f(y(e,1),x))}));t.exports=Q}).call(this,n("c8ba"))},c322:function(t,e,n){},e543:function(t,e,n){"use strict";n("c322")},febf:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-modal",{attrs:{title:"新建通知",width:640,visible:t.visible,confirmLoading:t.loading},on:{ok:function(){t.$emit("ok")},cancel:function(){t.$emit("cancel")}}},[n("a-spin",{attrs:{spinning:t.loading}},[n("a-form",t._b({attrs:{form:t.form}},"a-form",t.formLayout,!1),[n("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.model&&t.model.id>0,expression:"model && model.id > 0"}],attrs:{label:"通知ID"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{initialValue:0}],expression:"['id', { initialValue: 0 }]"}],attrs:{disabled:""}})],1),n("a-form-item",{attrs:{label:"通知名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入通知名称"}]}],expression:"['title', { rules: [{ required: true, message: '请输入通知名称' }] }]"}]})],1),n("a-form-item",{attrs:{label:"通知面向班级"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["class",{rules:[{required:!0,message:"请选择此通知面向班级"}]}],expression:"['class', { rules: [{ required: true, message: '请选择此通知面向班级' }] }]"}],attrs:{placeholder:"请选择此通知面向班级"}},[n("a-select-option",{attrs:{value:"所有班级"}},[t._v("所有班级")]),n("a-select-option",{attrs:{value:"21级管乐班"}},[t._v("21级管乐班")]),n("a-select-option",{attrs:{value:"21级弦乐班"}},[t._v("21级弦乐班")]),n("a-select-option",{attrs:{value:"21级作曲班"}},[t._v("21级作曲班")]),n("a-select-option",{attrs:{value:"20英才器乐"}},[t._v("20英才器乐")])],1)],1),n("a-form-item",{attrs:{label:"通知内容"}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"请输入通知内容"}]}],expression:"['content', { rules: [{ required: true, message: '请输入通知内容' }] }]"}]})],1)],1)],1)],1)},i=[],o=(n("d3b7"),n("88bc")),a=n.n(o),s=["id","title","class","content"],c={props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}}},data:function(){return this.formLayout={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}},{form:this.$form.createForm(this)}},created:function(){var t=this;s.forEach((function(e){return t.form.getFieldDecorator(e)})),this.$watch("model",(function(){t.model&&t.form.setFieldsValue(a()(t.model,s))}))}},u=c,l=n("2877"),d=Object(l["a"])(u,r,i,!1,null,null,null);e["default"]=d.exports}}]);